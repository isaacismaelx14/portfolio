---
import { getLangFromUrl, useTranslatedPath } from "../i18n/utils";

interface Props extends astroHTML.JSX.AnchorHTMLAttributes {}

const { href, class: className, ...props } = Astro.props;

const lang = getLangFromUrl(Astro.url);
const translatePath = useTranslatedPath(lang);

const localizedHref =
    typeof href === "string" &&
    !href.startsWith("http") &&
    !href.startsWith("mailto") &&
    !href.startsWith("#")
        ? translatePath(href)
        : href;
---

<a href={localizedHref} class={className} {...props}>
    <slot />
</a>
