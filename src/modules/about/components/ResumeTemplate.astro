---
/**
 * ResumeTemplate - Optimized PDF Resume Layout
 * Uses fixed pixel dimensions for reliable html2canvas rendering
 */

interface Experience {
    year: string;
    title: string;
    company: string;
    description: string;
    skills?: string[];
    isGrouped?: boolean;
    positions?: { year: string; title: string; description: string }[];
}

interface Education {
    year: string;
    title: string;
    company: string;
    description?: string;
}

interface Skill {
    name: string;
    years?: string;
}

interface Language {
    name: string;
    level: string;
}

interface Props {
    name: string;
    title: string;
    email: string;
    phone: string;
    location: string;
    website: string;
    linkedin: string;
    github: string;
    summary: string;
    experience: Experience[];
    education: Education[];
    skills: Skill[];
    languages: Language[];
    labels: {
        experience: string;
        education: string;
        skills: string;
        languages: string;
        contact: string;
    };
}

const { 
    name, 
    title, 
    email, 
    phone, 
    location, 
    website, 
    linkedin, 
    github,
    summary, 
    experience, 
    education, 
    skills, 
    languages,
    labels
} = Astro.props;
---

<div id="resume-template" style="
    width: 794px;
    height: 1123px;
    padding: 40px 50px;
    background: #ffffff;
    color: #1a1a1a;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 12px;
    line-height: 1.4;
    box-sizing: border-box;
    overflow: hidden;
">
    <!-- Header -->
    <div style="
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 3px solid #2563eb;
    ">
        <h1 style="
            font-size: 32px;
            font-weight: 700;
            color: #1a1a1a;
            margin: 0 0 4px 0;
            letter-spacing: normal;
            word-spacing: normal;
            white-space: nowrap;
        ">Isaac Martinez</h1>
        <p style="
            font-size: 16px;
            color: #2563eb;
            font-weight: 600;
            margin: 0 0 12px 0;
        ">{title}</p>
        
        <!-- Contact Info -->
        <div style="display: flex; flex-wrap: wrap; gap: 16px; font-size: 11px; color: #4b5563;">
            <span>{email}</span>
            <span>•</span>
            <span>{phone}</span>
            <span>•</span>
            <span>{location}</span>
        </div>
        <div style="display: flex; flex-wrap: wrap; gap: 16px; font-size: 11px; color: #4b5563; margin-top: 4px;">
            <span>{website}</span>
            <span>•</span>
            <span>{linkedin}</span>
            <span>•</span>
            <span>{github}</span>
        </div>
    </div>

    <!-- Summary -->
    <div style="
        margin-bottom: 20px;
        padding: 12px 16px;
        background: #f8fafc;
        border-left: 4px solid #2563eb;
        border-radius: 4px;
    ">
        <p style="margin: 0; font-size: 11px; color: #374151; line-height: 1.5;">{summary}</p>
    </div>

    <!-- Main Content - Two Column -->
    <div style="display: flex; gap: 28px;">
        <!-- Left Column - Experience -->
        <div style="flex: 1.4;">
            <h2 style="
                font-size: 14px;
                font-weight: 700;
                color: #1a1a1a;
                margin: 0 0 12px 0;
                padding-bottom: 6px;
                border-bottom: 2px solid #e5e7eb;
                text-transform: uppercase;
                letter-spacing: 1px;
            ">{labels.experience}</h2>
            
            <div style="display: flex; flex-direction: column; gap: 14px;">
                {experience.slice(0, 4).map((item) => (
                    <div style="padding-bottom: 12px; border-bottom: 1px dashed #e5e7eb;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 2px;">
                            <span style="font-size: 13px; font-weight: 600; color: #1a1a1a;">{item.title}</span>
                            <span style="
                                font-size: 10px;
                                color: #6b7280;
                                background: #f3f4f6;
                                padding: 2px 8px;
                                border-radius: 4px;
                                white-space: nowrap;
                            ">{item.year}</span>
                        </div>
                        <p style="font-size: 11px; color: #2563eb; font-weight: 500; margin: 0 0 6px 0;">{item.company}</p>
                        
                        {!item.isGrouped && item.description && (
                            <p style="font-size: 10px; color: #4b5563; margin: 0 0 8px 0; line-height: 1.5;">
                                {item.description.length > 180 ? item.description.slice(0, 180) + '...' : item.description}
                            </p>
                        )}
                        
                        {item.isGrouped && item.positions && (
                            <div style="margin: 6px 0; padding-left: 10px; border-left: 2px solid #dbeafe;">
                                {item.positions.slice(0, 2).map((pos) => (
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 3px 0;">
                                        <span style="font-size: 10px; color: #374151; font-weight: 500;">{pos.title}</span>
                                        <span style="font-size: 9px; color: #9ca3af;">{pos.year}</span>
                                    </div>
                                ))}
                            </div>
                        )}
                        
                        {item.skills && item.skills.length > 0 && (
                            <div style="display: flex; flex-wrap: wrap; gap: 4px; margin-top: 6px;">
                                {item.skills.slice(0, 5).map((skill) => (
                                    <span style="
                                        font-size: 9px;
                                        background: #eff6ff;
                                        color: #1d4ed8;
                                        padding: 2px 8px;
                                        border-radius: 4px;
                                        font-weight: 500;
                                    ">{skill}</span>
                                ))}
                            </div>
                        )}
                    </div>
                ))}
            </div>
        </div>

        <!-- Right Column -->
        <div style="flex: 1;">
            <!-- Skills -->
            <div style="margin-bottom: 20px;">
                <h2 style="
                    font-size: 14px;
                    font-weight: 700;
                    color: #1a1a1a;
                    margin: 0 0 12px 0;
                    padding-bottom: 6px;
                    border-bottom: 2px solid #e5e7eb;
                    text-transform: uppercase;
                    letter-spacing: 1px;
                ">{labels.skills}</h2>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 6px;">
                    {skills.map((skill) => (
                        <div style="
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            padding: 6px 8px;
                            background: #f9fafb;
                            border-radius: 4px;
                            font-size: 10px;
                        ">
                            <span style="color: #1a1a1a; font-weight: 500;">{skill.name}</span>
                            {skill.years && (
                                <span style="
                                    font-size: 9px;
                                    color: #6b7280;
                                    background: #e5e7eb;
                                    padding: 1px 6px;
                                    border-radius: 3px;
                                ">{skill.years}</span>
                            )}
                        </div>
                    ))}
                </div>
            </div>

            <!-- Education -->
            <div style="margin-bottom: 20px;">
                <h2 style="
                    font-size: 14px;
                    font-weight: 700;
                    color: #1a1a1a;
                    margin: 0 0 12px 0;
                    padding-bottom: 6px;
                    border-bottom: 2px solid #e5e7eb;
                    text-transform: uppercase;
                    letter-spacing: 1px;
                ">{labels.education}</h2>
                
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    {education.slice(0, 3).map((item) => (
                        <div style="padding-bottom: 8px;">
                            <p style="font-size: 11px; font-weight: 600; color: #1a1a1a; margin: 0;">{item.title}</p>
                            <p style="font-size: 10px; color: #2563eb; margin: 2px 0;">{item.company}</p>
                            <span style="font-size: 9px; color: #6b7280;">{item.year}</span>
                        </div>
                    ))}
                </div>
            </div>

            <!-- Languages -->
            <div>
                <h2 style="
                    font-size: 14px;
                    font-weight: 700;
                    color: #1a1a1a;
                    margin: 0 0 12px 0;
                    padding-bottom: 6px;
                    border-bottom: 2px solid #e5e7eb;
                    text-transform: uppercase;
                    letter-spacing: 1px;
                ">{labels.languages}</h2>
                
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    {languages.map((lang) => (
                        <div style="
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            padding: 8px 12px;
                            background: #f9fafb;
                            border-radius: 4px;
                        ">
                            <span style="font-size: 11px; font-weight: 500; color: #1a1a1a;">{lang.name}</span>
                            <span style="
                                font-size: 10px;
                                color: #059669;
                                background: #d1fae5;
                                padding: 2px 10px;
                                border-radius: 4px;
                                font-weight: 500;
                            ">{lang.level}</span>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    </div>
</div>
