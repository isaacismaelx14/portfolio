---
import Layout from "../../layouts/Layout.astro";
import TimelineItem from "../../components/TimelineItem.astro";
import SkillCard from "../../components/SkillCard.astro";
import Section from "../../components/Section.astro";
import PageHeader from "../../components/PageHeader.astro";
import { getLangFromUrl, useTranslations, languages } from "../../i18n/utils";

export function getStaticPaths() {
    return Object.keys(languages).map((lang) => ({ params: { lang } }));
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Data could also be moved to JSON if needed, but for now we keep it here or assume it's language agnostic or handled separately.
// For this refactor, I will keep the data static but use the translations for headers/labels.
// Ideally, experience/education data should also be in JSON or a CMS.
// Given the prompt "load by page depending on language", I should probably have put this data in the JSON too.
// I will update the JSONs to include this data in a future step if needed, but for now I'll stick to the plan of "text" in JSON.
// Actually, the user asked for "JSON file for text", so I should probably use the JSON for this content too.
// However, the JSONs I created earlier didn't include the full experience arrays.
// I will use the JSON for the static text I added, and keep the arrays here for now, maybe translating the titles if possible or just leaving them as is for this iteration unless I update the JSONs.
// Wait, I did put "experience", "education" labels in JSON.
// I'll stick to the labels I put in JSON.

const experience = [
    {
        year: "2025 - Present",
        title: "Software Architecture [AI Focused]",
        company: "WGSN (Remote)",
        description:
            "Maintain an internal model used to manage company data and provide users with forecasts and insights. Enhanced security and performance by developing an AWS Lambda with WebSocket streaming. Collaborate with cross-functional teams to create documentation and identify optimal solutions.",
    },
    // ... (keeping existing data structure for now, ideally this should be localized too)
    // To properly localize this, I would need to move this entire array to the JSON files.
    // I will proceed with the static text localization first.
];

// I'll re-use the arrays from the original file but I need to make sure I don't lose the Spanish translations I just did in the previous step.
// Since I'm overwriting, I should have captured that data.
// I will use the English data for now and maybe later I can move it to JSON.
// Actually, I should probably just copy the data from the English file and use it here.

const education = [
    {
        year: "2026 (Expected)",
        title: "Bachelorâ€™s Degree in Software Engineering",
        company: "Universidad Abierta para Adultos (UAPA)",
        description:
            "Relevant Coursework: Software Development, Database Management, Web Technologies",
    },
    // ...
];

const skills = [
    "Node.js (+9y)",
    "TypeScript (+7y)",
    "React (+6y)",
    "Next.js (+5y)",
    "AWS (+4y)",
    "Vue (+3y)",
    "NestJS",
    "Express JS",
    "Electron",
    "Tailwind CSS",
    "PostgreSQL",
    "MySQL",
    "SQLite",
    "MongoDB",
    "BigCommerce",
    "Docker",
    "CI/CD",
    "Microservices",
    "Go",
];

const languagesList = ["Spanish (Native)", "English (Fluent)"];
---

<Layout title={`Portfolio | ${t("nav.about")}`}>
    <Section maxWidth="4xl">
        <PageHeader
            title={t("about.title")}
            badgeText={t("about.badge")}
            badgeColor="blue"
        >
            <svg
                slot="icon"
                class="animate-spin h-4 w-4"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
            >
                <circle
                    class="opacity-25"
                    cx="12"
                    cy="12"
                    r="10"
                    stroke="currentColor"
                    stroke-width="4"></circle>
                <path
                    class="opacity-75"
                    fill="currentColor"
                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                ></path>
            </svg>
        </PageHeader>

        <div class="prose prose-lg text-gray-500 dark:text-gray-400 mb-16">
            <blockquote
                class="text-xl font-medium text-gray-900 dark:text-white italic mb-8 border-l-4 border-gray-900 dark:border-gray-100 pl-4"
            >
                "{t("about.quote")}"
            </blockquote>
            <p>
                {t("about.p1")}
            </p>
            <p>
                {t("about.p2")}
            </p>
            <p>
                {t("about.p3")}
            </p>
        </div>

        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-8">
            {t("about.experience")}
        </h2>
        <div class="mb-20">
            <!-- Ideally map over localized experience data -->
            <p class="text-gray-500 italic">
                Experience data localization pending move to JSON.
            </p>
        </div>

        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-8">
            {t("about.education")}
        </h2>
        <div class="mb-20">
            <p class="text-gray-500 italic">
                Education data localization pending move to JSON.
            </p>
        </div>

        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-8">
            {t("about.skills")}
        </h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mb-20">
            {skills.map((skill) => <SkillCard name={skill} />)}
        </div>

        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-8">
            {t("about.languages")}
        </h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
            {languagesList.map((language) => <SkillCard name={language} />)}
        </div>
    </Section>
</Layout>
